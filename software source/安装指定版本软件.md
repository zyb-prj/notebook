# 1 安装指定版本的 gcc

此处以最新的 gcc-12 为例 

## 1.1 下载地址

- 官网全版本资源下载地址：http://ftp.gnu.org/gnu/gcc/
- 个人维护版本 gcc12：[下载地址](https://zyb-tools.oss-cn-chengdu.aliyuncs.com/ubuntu-software/gcc-12.1.0.tar.gz?OSSAccessKeyId=LTAI5tREkNKGRcMiPdgNQUye&Expires=3678178426&Signature=%2Be4aVCUxZ3Czfr%2Bzjxoif3G7KwI%3D)

## 1.2 下载&编译&安装

- 1st 下载&解压&进入源码目录

    - 下载 gcc 源码至自定义目录下

        ```bash
        wget http://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-12.1.0.tar.gz
        ```

    - 解压 gcc 源码至指定目录

        ```bash
        tar -C ~/tools/ -zxvf gcc-12.1.0.tar.gz
        ```

- 2nd 安装必须工具`sudo apt-get install bzip2`

- 3rd 执行编译配置

    - 跳转至 gcc 源码根目录

        ```bash
        cd ~/tools/gcc-12.1.0/
        ```

    - 在 gcc 源码根目录下创建编译产物目录并跳转至此

        ```bash
        mkdir build && cd build/
        ```

    - 在编译产物目录 build 下指定编译配置

        ```bash
        ../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib
        ```

        - --prefix=/usr/local 配置安装目录
        - –enable-languages 表示你要让你的 gcc 支持那些语言
        - –disable-checking 生成的编译器在编译过程中不做额外检查
        - 也可以使用*–enable-checking=xxx*来增加一些检查

- 4th 编译（时间很久，在编译产物目录 build 下执行）：`make`

- 5th 安装（在编译产物目录 build 下执行）：`make install`

- 6th 使用`gcc -v`指令验证 gcc 版本，若还是之前的版本则重启系统后再次尝试验证

## 1.3 使用

- 1st 删除旧版本：`sudo apt-get remove gcc g++`

- 2nd 配置新版本全局可用

    - 链接 gcc

        ```bash
        sudo ln -s /usr/local/bin/gcc /usr/bin/gcc
        ```

    - 链接 g++

        ```bash
        ln -s /usr/local/bin/g++ /usr/bin/g++
        ```

- 3rd 更新动态库:TODO   **有误，后续改正**

    ```bash
    # 查看当前的动态库
    strings /usr/lib/libstdc++.so.6 | grep CXXABI
    rm -f /usr/lib/libstdc++.so.6
    ln -s /usr/local/lib64/libstdc++.so.6.0.29 /usr/lib/libstdc++.so.6
    
    # 查看更新后的动态库
    strings /usr/lib/libstdc++.so.6 | grep CXXABI
    
    # 安装后的动态库会位于/usr/local/lib目录下，
    # 其他版本在该目录下寻找对应的动态库libstdc++.so.6.X.XX
    ```

# 2 安装指定版本的 cmake

## 2.1 下载地址

官网全版本资源下载地址：https://cmake.org/download/

## 2.2 安装过程

- 1st 查看当前版本

    ```bash
    cmake --version
    ```

- 2nd 下载指定 cmake 源码至自定义目录

    ```bash
    wget https://cmake.org/download/
    ```

- 3rd 解压源码至指定目录（此处为 ~/tools）

    ```bash
    tar -c ~/tools -zxvf cmake-3.15.0-rc4.tar.gz
    ```

- 4th 编译安装

    - 进入源码根目录

        ```bash
        cd ~/tools/cmake-3.15.0-rc4
        ```

    - 执行配置

        ```bash
        ./bootstrap
        ```

    - 执行编译`make`

    - 执行安装

        ```bash
        sudo make install
        ```

    - 配置环境变量

        ```bash
        source ~/.bashrc
        ```

- 5th 验证

    ```bash
    cmake --version
    ```

