# 模块1_导言和概述

## Chapter1_快速构建

## Chapter2_我希望我知道的\_Yocto\_项目

## Chapter3_过渡到定制的系统开发环境

## Chapter4_Yocto-Project-软件概述

## Chapter5_技巧和窍门维基

# 模块2_Bitbake 使用手册

# 模块3_Yocto 手册

## Chapter1_概述和概念手册

### 1_Yocto项目概述和概念手册

#### 1-1_欢迎

欢迎阅读《Yocto 项目概述和概念手册》！本手册通过提供概念、软件概述、最著名的方法 (BKM) 以及其他适合 Yocto Project 新用户的高级入门信息来介绍 Yocto Project。

以下是本手册的内容：

- [介绍 Yocto 项目](#2_Yocto_项目介绍)：本章介绍 Yocto 项目。你将了解到 Yocto 项目的特点和挑战、层模型、组件和工具、开发方法、Poky 参考发行版、OpenEmbedded 构建系统工作流程以及一些基本的 Yocto 术语。
- [Yocto 项目开发环境](#3_Yocto_项目开发环境)：本章将帮助你开始了解 Yocto Project 开发环境。你将了解开源、开发主机、Yocto Project 源代码库、使用 Git 和 Yocto Project 的工作流程、Git 入门以及许可信息。
- [Yocto 项目概念](#4_Yocto_项目概念) ：本章介绍有关 Yocto 项目的各种概念。你可以找到有关组件、开发、跨工具链等方面的概念信息。

本手册不提供以下内容：

- **开发任务的分步说明**：在 Yocto Project 文档集的其他手册中也有指导程序。例如，[Yocto 项目开发任务手册](#Chapter5_开发任务手册)提供了如何执行各种开发任务的示例。另一个例子是 [Yocto 项目应用程序开发和可扩展软件开发工具包 (eSDK) 手册](#Chapter8\_应用程序开发和可扩展\_SDK_(eSDK))（Yocto Project Application Development and the Extensible Software Development Kit (eSDK) manual）包含如何安装 SDK 的详细说明，SDK 用于为目标硬件开发应用程序。
- **参考资料**：这类材料包含在适当的[参考手册](#Chapter3_参考手册)中。例如，Yocto 项目参考手册中记录了系统变量。又如，[Yocto 项目板卡支持包开发者指南](#Chapter4\_电路板支持软件包\_(BSP)_开发人员指南)（Yocto Project Board Support Package Developer's Guide）包含有关 BSP 的参考信息。
- **与 Yocto 项目无关的详细公共信息**：例如，关于如何使用源码控制管理器 Git 的详尽信息，通过互联网搜索和官方 Git 文档比通过 Yocto 项目文档更有说服力。

#### 1-2_其他信息

由于本手册介绍了许多不同主题的信息，建议阅读补充资料，以便全面理解。有关 Yocto 项目的其他介绍信息，请参见 [Yocto 项目网站](https://www.yoctoproject.org/)。如果你想在不了解 Yocto 项目的情况下构建一个镜像，作为快速测试的一种方式，请参阅 [Yocto 项目快速构建文档](#Chapter1_快速构建)。有关链接和其他文档的完整列表，请参见 Yocto 项目参考手册中的[链接和相关文档](#15-6_链接和相关文档)部分。

### 2_Yocto_项目介绍

#### 2-1_什么是 Yocto 项目？

Yocto 项目是一个开源协作项目，帮助开发人员创建基于 Linux 的定制系统，这些系统专为嵌入式产品设计，与产品的硬件架构无关。Yocto 项目提供了一个灵活的工具集和开发环境，使世界各地的嵌入式设备开发人员能够通过共享技术、软件栈、配置和最佳实践来协作创建这些定制的 Linux 映像。

全球数以千计的开发人员发现，Yocto Project 在系统和应用程序开发、存档和管理以及用于速度、占用空间和内存利用的定制方面都具有优势。该项目是提供嵌入式软件栈的标准。该项目允许针对多种硬件平台进行软件定制和构建交换，并允许维护和扩展软件栈。

![img](https://docs.yoctoproject.org/_images/key-dev-elements.png)

有关 Yocto 项目的更多介绍信息，您可能会对 Drew Moseley 的这篇[文章](https://www.embedded.com/why-the-yocto-project-for-my-iot-project/)和这段简短的[介绍视频](https://www.youtube.com/watch?v=utZpKM7i5Z4)感兴趣。

本节其余部分将概述与 Yocto 项目相关的优势和挑战。

##### 2-1-1_特性

以下是 Yocto 项目的特点和优势：

- **业界广泛采用**：许多半导体、操作系统、软件和服务供应商都在其产品和服务中采用并支持 Yocto 项目。要了解 Yocto 项目社区和参与 Yocto 项目的公司，请参阅 [Yocto 项目](https://www.yoctoproject.org/)主页上的 "社区 "和 "生态系统 "标签。
- **架构无关**：Yocto 项目支持英特尔、ARM、MIPS、AMD、PPC 和其他架构。大多数 ODM、OSV 和芯片供应商都会创建并提供支持其硬件的 BSP。如果你有定制的芯片，也可以创建支持该架构的 BSP。

除了广泛的架构支持外，Yocto 项目还完全支持 Quick EMUlator (QEMU) 仿真的各种设备。

- **镜像和代码轻松转移**：Yocto 项目的输出可以在不同架构之间轻松转移，而无需迁移到新的开发环境。此外，如果你使用 Yocto 项目创建了一个映像或应用程序，但发现自己无法为其提供支持，Wind River、Mentor Graphics、Timesys 和 ENEA 等商业 Linux 供应商可以接收它并提供持续支持。这些厂商都有使用 Yocto 项目构建的产品。
- **灵活性**：企业使用 Yocto 项目的方式多种多样。其中一个例子是创建一个内部 Linux 发行版，作为公司可在多个产品组中使用的代码库。通过定制和分层，项目组可以利用基础 Linux 发行版创建适合其产品需求的发行版。
- **受限嵌入式设备和物联网设备的理想选择**：与完整的 Linux 发行版不同，您可以使用 Yocto 项目创建您所需的嵌入式设备。您只需添加设备绝对需要的功能支持或软件包。对于有显示硬件的设备，你可以使用可用的系统组件，如 X11、Wayland、GTK+、Qt、Clutter 和 SDL（等等）来创建丰富的用户体验。对于没有显示屏或想使用其他用户界面框架的设备，您可以选择不构建这些组件。
- **全面的工具链功能**：支持架构的工具链可满足大多数用例。不过，如果你的硬件支持的功能不属于标准工具链的一部分，你可以通过指定特定平台的调整参数来轻松定制该工具链。此外，如果您需要使用第三方工具链，Yocto 项目内置的机制也能满足您的需求。
- **机制重于策略**：专注于机制而非策略，可确保您根据设计需要自由设置策略，而不是采用某些系统软件提供商强制执行的决定。
- **使用层模型**：Yocto 项目[层基础架构](#2-2_Yocto 项目层模型)将相关功能分组为独立的捆绑包。你可以根据需要逐步将这些分组功能添加到你的项目中。使用层来隔离和分组功能，可以减少项目的复杂性和冗余，让你轻松扩展系统、进行定制，并保持功能的有序性。
- **支持部分编译**：你可以根据需要构建和重建单个软件包。Yocto Project 通过[共享状态缓存](#4-5_共享状态缓存)（sstate）方案实现了这一点。可以单独构建和调试组件，从而简化了项目开发。
- **按照严格的时间表发布**：主要版本的发布[周期](#3_Yocto 项目发布和稳定版发布流程)为六个月，预计在十月和四月发布。最近的两个版本支持点发布，以解决常见的漏洞和暴露问题。这种可预测性对于基于 Yocto 项目的项目至关重要，它允许开发团队规划活动。
- **丰富的个人和组织生态系统**：对于开源项目来说，社区的价值非常重要。支持论坛、专业知识以及不断推动 Yocto 项目向前发展的活跃开发人员都是现成的。
- **二进制可重复性**：Yocto 项目允许你对依赖关系做出非常明确的规定，并实现了非常高的二进制可重复性（例如，core-image-minimal 的可重复性高达 99.8%）。如果发行版没有明确说明哪些软件包需要调入，以及调入的顺序以支持依赖关系，那么其他构建系统就可以任意调入软件包。
- **许可证清单**：Yocto 项目提供许可证清单，供需要跟踪开源许可证使用情况的人员（如法律团队）审查。

##### 2.1.2_挑战

以下是使用 Yocto 项目开发时可能遇到的挑战：

- 陡峭的学习曲线：Yocto 项目的学习曲线非常陡峭，有许多不同的方法来完成类似的任务。要在这些方法中做出选择可能很困难。
- 了解您的设计需要进行哪些修改需要进行一些研究：除了简单的教程阶段，要了解你的特定设计需要做哪些修改，可能需要大量的研究和调查。有关帮助你从试用 Yocto 项目过渡到在项目中使用它的信息，请参阅 Yocto 项目网站上的[我希望我知道的 Yocto 项目](#Chapter2_我希望我知道的\_Yocto\_项目)和[过渡到系统开发的自定义环境](#Chapter3_过渡到定制的系统开发环境)文档。
- 项目工作流程可能令人困惑：如果你习惯于传统的桌面和服务器软件开发，Yocto Project 的工作流程可能会让你感到困惑。在台式机开发环境中，有一些机制可以方便地提取和安装新软件包，这些软件包通常是通过互联网从服务器上获取的预编译二进制文件。使用 Yocto 项目，你必须修改配置并重建，才能添加其他软件包。
- 在交叉构建环境中工作可能会感到陌生：当开发代码要在目标机上运行时，在实际目标机上编译、执行和测试可能比在开发主机上运行 BitBake 编译，然后将二进制文件部署到目标机上进行测试更快。虽然 Yocto 项目确实支持目标机上的开发工具，但还需要额外的步骤，将你的修改整合回 Yocto 项目的构建环境。Yocto 项目支持一种中间方法，即在 BitBake 环境中的开发系统上进行修改，然后只将更新的软件包部署到目标机上。

Yocto Project OpenEmbedded 编译系统会生成标准格式的软件包（如 RPM、DEB、IPK 和 TAR）。你可以在目标机上使用 rpm 或 ipk 等实用程序，将这些软件包部署到目标机的运行系统中。

- 初始构建时间可能很长：不幸的是，由于一个完全正常运行的 Linux 系统需要从头开始构建大量软件包，因此较长的初始构建时间是不可避免的。不过，一旦初始构建完成，Yocto 项目使用的共享状态（sstate）缓存机制会阻止系统重建自上次构建以来未被 "触及 "的软件包。共享状态机制大大缩短了连续编译的时间。

#### 2-2_Yocto 项目层模型

#### 2-3_组件和工具

##### 2-3-1_开发工具

##### 2-3-2_生产工具

##### 2-3-3_开放嵌入式构建系统组件

##### 2-3-4_参考发行版-(Poky)

##### 2-3-5_已完成目标的软件包

##### 2-3-6_存档组件

#### 2-4_开发方法

#### 2-5_参考嵌入式发行版 (Poky)

#### 2-6_OpenEmbedded-编译系统工作流程

#### 2-7_一些基本术语

### 3_Yocto_项目开发环境

### 4_Yocto_项目概念

#### 4-5_共享状态缓存

### 15_共享和其他信息

#### 15-6_链接和相关文档

## Chapter2_贡献指南

## Chapter3_引导手册

### 2_Yocto 项目术语

#### BitBake

OpenEmbedded 构建系统用于构建映像的任务执行器和调度程序。有关 BitBake 的更多信息，请参阅[《BitBake 用户手册》](#模块2_Bitbake 使用手册)。

#### OpenEmbedded Build System

Yocto 项目专用的构建系统。OpenEmbedded 联编系统基于另一个名为 "Poky" 的项目，该项目使用 BitBake 作为任务执行器。在整个 Yocto 项目文档集中，OpenEmbedded 联编系统有时被简称为 "联编系统"。如果引用了其他联编系统，如主机或目标联编系统，文档中会明确说明两者的区别。

备注：有关 Poky 的一些历史信息，请参阅 Poky 术语。

#### Poky

Poky 的发音是 Pock-ee，是一种参考嵌入式发行版和参考测试配置。Poky 提供以下功能：

- 用于说明如何定制发行版的基础功能发行版。


- 测试 Yocto 项目组件的一种方法（即 Poky 用于验证 Yocto 项目）。


- 下载 Yocto 项目的工具。

Poky 并非产品级发行版。相反，它是定制的一个良好起点。

备注：Poky 最初是 OpenedHand 开发的一个开源项目。OpenedHand 在现有 OpenEmbedded 构建系统的基础上开发了 Poky，目的是为嵌入式 Linux 创建一个商业上可支持的构建系统。英特尔公司收购 OpenedHand 后，poky 项目成为 Yocto 项目构建系统的基础。

### 3_Yocto 项目发布和稳定版发布流程

## Chapter4\_电路板支持软件包\_(BSP)_开发人员指南

## Chapter5_开发任务手册

## Chapter6_Linux-内核开发手册

## Chapter7_概况与追踪手册

## Chapter8\_应用程序开发和可扩展\_SDK_(eSDK)

## Chapter9_Toaster-手册

## Chapter10_测试环境手册

## Chapter11_BitBake-文档